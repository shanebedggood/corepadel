<div class="layout-topbar bg-gradient-to-br from-blue-900 to-blue-500 border-b-3 border-yellow-400">
  <div class="layout-topbar-logo-container">
    <button class="layout-menu-button layout-topbar-action !text-lg" (click)="layoutService.onMenuToggle()">
      <i class="pi pi-bars text-white"></i>
    </button>
    <a class="layout-topbar-logo flex items-center gap-2" routerLink="/admin">
      <span class="text-white">STRIDE & SERVE</span>
      <span class="bg-yellow-400 text-blue-900 px-2 py-1 rounded text-xs font-bold uppercase tracking-wider">Admin</span>
    </a>
  </div>

  <div class="layout-topbar-actions">
    <!-- Mobile menu toggle button -->
    <button class="layout-topbar-menu-button layout-topbar-action lg:hidden text-white !text-lg" (click)="toggleMobileMenu()">
      <i class="pi pi-ellipsis-v"></i>
    </button>

    <!-- Mobile menu content -->
    <div class="layout-topbar-menu mobile-menu border-t-3 border-yellow-400" #mobileMenu [class.show]="isMobileMenuVisible">
      <div class="layout-topbar-menu-content">
        <button type="button" class="layout-topbar-action text-blue-900 hover:bg-blue-50 !text-lg" (click)="onCalendarClick()">
          <i class="pi pi-calendar"></i>
          <span>Calendar</span>
        </button>
        <button type="button" class="layout-topbar-action text-blue-900 hover:bg-blue-50 !text-lg" (click)="onMessagesClick()">
          <i class="pi pi-inbox"></i>
          <span>Messages</span>
        </button>
        <button type="button" class="layout-topbar-action text-blue-900 hover:bg-blue-50 !text-lg" (click)="onProfileClick()">
          <i class="pi pi-user"></i>
          <span>My Profile</span>
        </button>

        <!-- Role switcher for users with multiple roles -->
        @if (hasMultipleRoles$ | async) {
            <div class="border-t border-gray-200 mt-2 pt-2">
          <button type="button" class="layout-topbar-action text-blue-900 hover:bg-blue-50 text-base font-semibold !text-lg" (click)="switchToPlayer()">
            <i class="pi pi-arrow-right-arrow-left text-lg"></i>
            <span class="text-base font-semibold">Switch to Player</span>
          </button>
            </div>
        }

        <div class="border-t border-gray-200 mt-2 pt-2">
          <button type="button" class="layout-topbar-action text-blue-900 hover:bg-blue-50 !text-lg" (click)="onLogoutClick()">
            <i class="pi pi-sign-out"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Desktop menu content -->
    <div class="layout-topbar-menu desktop-menu">
      <div class="layout-topbar-menu-content">
        <button type="button" class="layout-topbar-action flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-white !text-lg" (click)="onCalendarClick()">
          <i class="pi pi-calendar text-white"></i>
        </button>
        <button type="button" class="layout-topbar-action flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-white !text-lg" (click)="onMessagesClick()">
          <i class="pi pi-inbox text-white"></i>
        </button>
        <button type="button" class="layout-topbar-action flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-white !text-lg" (click)="profilePanel.toggle($event)">
          <i class="pi pi-user text-white"></i>
        </button>

        <!-- Role switcher for users with multiple roles -->
        @if (hasMultipleRoles$ | async) {
            <button type="button" class="layout-topbar-action flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-white !text-lg" (click)="switchToPlayer()">
          <i class="pi pi-arrow-right-arrow-left text-white text-lg"></i>
            </button>
        }
        <button type="button" class="layout-topbar-action flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-white !text-lg" (click)="onLogoutClick()">
          <i class="pi pi-sign-out text-white"></i>
        </button>
      </div>
    </div>
  </div>

  <p-popover #profilePanel>
    <div class="min-w-[150px] rounded-2xl bg-white shadow-lg z-[1000]">
      <button type="button" class="flex items-center gap-2 w-full p-3 border-none bg-transparent cursor-pointer transition-colors duration-200 rounded text-surface-900 text-lg hover:bg-surface-100 !text-lg" (click)="onProfileClick()">
        <i class="pi pi-user text-sm"></i>
        <span>My Profile</span>
      </button>
      <button type="button" class="flex items-center gap-2 w-full p-3 border-none bg-transparent cursor-pointer transition-colors duration-200 rounded text-surface-900 text-lg hover:bg-surface-100 !text-lg" (click)="onLogoutClick()">
        <i class="pi pi-sign-out text-sm"></i>
        <span>Logout</span>
      </button>
    </div>
  </p-popover>
</div>