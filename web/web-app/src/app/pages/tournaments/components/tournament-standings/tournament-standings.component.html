<div class="tournament-standings">
    <!-- Loading State -->
    @if (loading) {
        <div class="loading-container">
            <div class="loading-spinner">
                <i class="pi pi-spin pi-spinner"></i>
                <p>Loading standings...</p>
            </div>
        </div>
    }

    <!-- Error State -->
    @if (error) {
        <div class="error-container">
            <div class="error-message">
                <i class="pi pi-exclamation-triangle"></i>
                <p>{{ error }}</p>
            </div>
        </div>
    }

    <!-- Standings Content -->
    @if (!loading && !error) {
        <div class="standings-content">
        <!-- Standings Legend -->
        <div class="standings-legend">
            <div class="legend-item">
                <span class="legend-label">Pos:</span>
                <span class="legend-description">Position</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">P:</span>
                <span class="legend-description">Matches Played</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">W:</span>
                <span class="legend-description">Wins</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">L:</span>
                <span class="legend-description">Losses</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">D:</span>
                <span class="legend-description">Draws</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">GF:</span>
                <span class="legend-description">Games For</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">GA:</span>
                <span class="legend-description">Games Against</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">GD:</span>
                <span class="legend-description">Games Difference</span>
            </div>
            <div class="legend-item">
                <span class="legend-label">Pts:</span>
                <span class="legend-description">Points</span>
            </div>
        </div>

        @for (group of groups; track trackByGroup($index, group)) {
            <div class="group-standings">
            <h3>{{ getGroupName(group.id!) }}</h3>
            
            <p-table 
                [value]="getStandingsForGroup(group.id!)" 
                [tableStyle]="{ 'min-width': '50rem' }"
                styleClass="p-datatable-sm">
                
                <ng-template pTemplate="header">
                    <tr>
                        <th>Pos</th>
                        <th>Team</th>
                        <th>P</th>
                        <th>W</th>
                        <th>L</th>
                        <th>D</th>
                        <th>GF</th>
                        <th>GA</th>
                        <th>GD</th>
                        <th>Pts</th>
                    </tr>
                </ng-template>
                
                <ng-template pTemplate="body" let-standing>
                    <tr [class]="getPositionClass(standing.position)">
                        <td>
                            <span class="position-badge">{{ getPositionBadge(standing.position) }}</span>
                        </td>
                        <td>
                            <div>{{ standing.teamName || getTeamName(standing.teamId) }}</div>
                            <div class="text-xs text-gray-500">{{ getTeamPlayerNames(standing.teamId) }}</div>
                        </td>
                        <td>{{ standing.matchesPlayed }}</td>
                        <td>{{ standing.matchesWon }}</td>
                        <td>{{ standing.matchesLost }}</td>
                        <td>{{ standing.matchesDrawn }}</td>
                        <td>{{ standing.goalsFor }}</td>
                        <td>{{ standing.goalsAgainst }}</td>
                        <td [class]="getGoalDifferenceClass(standing.goalDifference)">
                            {{ standing.goalDifference > 0 ? '+' : '' }}{{ standing.goalDifference }}
                        </td>
                        <td class="points">{{ standing.points }}</td>
                    </tr>
                </ng-template>
                
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="9" class="text-center">
                            No standings available for this group.
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        }
    </div>
    }
</div> 