# Production configuration for Cloud Run deployment

# Database configuration for Cloud SQL
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DATABASE_USERNAME:corepadel}
quarkus.datasource.password=${DATABASE_PASSWORD:corepadel123}
quarkus.datasource.jdbc.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/corepadel}

# Hibernate configuration
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# REST configuration for Cloud Run
quarkus.http.port=${PORT:8080}
quarkus.http.host=0.0.0.0
quarkus.http.cors=true
quarkus.http.cors.origins=https://corepadelapp.web.app,https://corepadelapp.firebaseapp.com
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=authorization,Authorization,accept,accept-language,content-type,x-requested-with,x-authorization,X-Authorization,origin,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
quarkus.http.cors.exposed-headers=Content-Disposition,Authorization,Access-Control-Allow-Origin,Access-Control-Allow-Methods,Access-Control-Allow-Headers
quarkus.http.cors.access-control-max-age=86400
quarkus.http.cors.access-control-allow-credentials=true

# Disable Quarkus OIDC and Keycloak Dev Services
quarkus.oidc.enabled=false
quarkus.keycloak.devservices.enabled=false

# Allow all via HTTP auth to avoid security handler consuming Authorization header
quarkus.http.auth.proactive=false
quarkus.http.auth.permission.permit.paths=/*
quarkus.http.auth.permission.permit.policy=permit

# OpenAPI/Swagger configuration (disabled in production)
quarkus.swagger-ui.always-include=false

# Logging configuration for production
quarkus.log.category."za.cf.cp".level=INFO
quarkus.log.category."org.hibernate.SQL".level=WARN
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=WARN

# Firebase configuration
firebase.project-id=${FIREBASE_PROJECT_ID:corepadelapp}
firebase.region=${FIREBASE_REGION:us-central1}

# Performance tuning for Cloud Run
quarkus.http.limits.max-body-size=10M
quarkus.http.limits.max-header-size=10K

# Health check endpoint
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.liveness-path=/health/live
quarkus.smallrye-health.readiness-path=/health/ready

# Metrics (optional - for monitoring)
quarkus.micrometer.enabled=true
quarkus.micrometer.registry-enabled-default=true
quarkus.micrometer.binder-enabled-default=true
